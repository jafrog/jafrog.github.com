<!DOCTYPE HTML>
<head>
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/css/syntax.css" type="text/css" media="screen" />
<!--  <link rel="stylesheet" href="/css/pygments.css" type="text/css" media="screen" />-->

  <!-- Google analytics -->
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30366699-2']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>

  <title>jafrog</title>
</head>

<body>
  <div class="mx-auto max-w-7xl sm:px-6 lg:px-8 bg-slate-50 font-plex">
    <div class="mx-auto max-w-5xl sm:px-8 lg:px-24">
      <div class="flex justify-between sm:py-6 md:py-12 border-b">
    <div class="flex flex-col justify-start">
        <h1 class="text-3xl font-semibold">
            <a href="/">jafrog's dev blog</a>
        </h1>
        <div class="flex justify-start items-center mt-2`">
            <a href="https://www.github.com/jafrog">
                <img src="/assets/github.svg" alt="Github" class="w-6 h-6" />
            </a>
            <a href="https://www.linkedin.com/in/irinabednova/">
                <img src="/assets/linkedin.svg" alt="Linkedin" class="w-6 h-6">
            </a>
        </div>
    </div>
    <div class="right-0 flex items-center">
        <img src="/assets/avatar.jpg" alt="jafrog" class="h-16 w-16 rounded-full" />
    </div>
</div>

      <script src="/assets/snap.svg.js"></script>
<div class="pt-20">
  <div class="flex items-center pb-2">
    <img src="/assets/calendar.svg" alt="Time" class="w-4 h-4" />
    <time class="pl-1 text-gray-500" datetime="2012-11-22 00:00:00 +0000">22 November 2012</time>
  </div>
  <div class="text-3xl pb-10 font-medium text-sky-500">Inherit Classes From Struct</div>
</div>
<div class="pb-20">
  <p>I’ve recently spotted a curious trend in blogposts about Ruby. It’s the way people define classes in examples. It goes like this:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Foo</span> <span class="o">&lt;</span> <span class="no">Struct</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:bar</span><span class="p">)</span>
  <span class="c1"># some methods...</span>
<span class="k">end</span></code></pre></figure>

<p>Why? Because it’s shorter replacement for this:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Foo</span>
  <span class="nb">attr_accessor</span> <span class="ss">:bar</span>
  
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
    <span class="vi">@bar</span> <span class="o">=</span> <span class="n">bar</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>The other way to save typing on attributes lookes like this:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Foo</span> <span class="o">=</span> <span class="no">Struct</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:bar</span><span class="p">)</span> <span class="k">do</span>
  <span class="c1"># some methods...</span>
<span class="k">end</span></code></pre></figure>

<p>It brought up an interesting discussion on twitter, when <a href="http://twitter.com/jeg2">@jeg2</a> said he didn’t like the practice. One important consequence of using it that was mentioned in this discussion is changing of ancestor chain.</p>

<p>When declaring class usual way:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Foo</span><span class="p">.</span><span class="nf">ancestors</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="no">Foo</span><span class="p">,</span> <span class="no">Object</span><span class="p">,</span> <span class="no">Kernel</span><span class="p">,</span> <span class="no">BasicObject</span><span class="p">]</span></code></pre></figure>

<p>When inheriting from <code class="language-plaintext highlighter-rouge">Struct.new</code>:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Foo</span><span class="p">.</span><span class="nf">ancestors</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="no">Foo</span><span class="p">,</span> <span class="c1">#&lt;Class:0x00000001d41100&gt;, Struct, Enumerable, Object, Kernel, BasicObject]</span></code></pre></figure>

<p>When creating a constant from <code class="language-plaintext highlighter-rouge">Struct.new</code>:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Foo</span><span class="p">.</span><span class="nf">ancestors</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="no">Foo</span><span class="p">,</span> <span class="no">Struct</span><span class="p">,</span> <span class="no">Enumerable</span><span class="p">,</span> <span class="no">Object</span><span class="p">,</span> <span class="no">Kernel</span><span class="p">,</span> <span class="no">BasicObject</span><span class="p">]</span></code></pre></figure>

<p>Have you noticed <code class="language-plaintext highlighter-rouge">Enumerable</code> in two later cases? It means that suddenly instances of your class start to respond to <code class="language-plaintext highlighter-rouge">each</code> method and a bunch of other methods. So it’s better be careful using <code class="language-plaintext highlighter-rouge">Struct</code> like this.</p>

</div>


    </div>
  </div>
</body>
